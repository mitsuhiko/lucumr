{% extends "layout.html" %}
{% block title %}Tags{% endblock %}
{% block body %}
  <h1>Tags</h1>
  <ul class=tagcloud>
  {%- for tag in get_tags(limit=50) %}
    <li><a href="{{ link_to('tag', tag=tag.name) }}" style="font-size: {{
      tag.size }}%" data-count="{{ tag.count }}" class="tag-link">{{ tag.name }}</a>
  {%- endfor %}
  </ul>

  <style>
    .tag-link {
      position: relative;
    }
    
    .tag-tooltip {
      position: absolute;
      bottom: 120%;
      left: 50%;
      transform: translateX(-50%);
      background: var(--background-color);
      color: var(--text-color);
      padding: 6px 10px;
      border-radius: 6px;
      font-size: 13px;
      white-space: nowrap;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s ease;
      z-index: 1000;
      border: 1px solid var(--border-color);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    }
    
    .tag-tooltip::before,
    .tag-tooltip::after {
      content: '';
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      border: 6px solid transparent;
    }
    
    .tag-tooltip::before {
      border-top-color: var(--border-color);
      margin-top: 1px;
    }
    
    .tag-tooltip::after {
      border-top-color: var(--background-color);
      border-width: 5px;
    }
    
    .tag-link:hover .tag-tooltip {
      opacity: 1;
    }
  </style>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const tagLinks = document.querySelectorAll('.tag-link');
      
      tagLinks.forEach(function(link) {
        const count = link.getAttribute('data-count');
        const tooltip = document.createElement('div');
        tooltip.className = 'tag-tooltip';
        tooltip.textContent = count === '1' ? '1 article' : count + ' articles';
        link.appendChild(tooltip);
      });
    });
  </script>
{% endblock %}
